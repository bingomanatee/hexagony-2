!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@wonderlandlabs/n")):"function"==typeof define&&define.amd?define(["@wonderlandlabs/n"],n):(t=t||self).Hexagony=n(t._N)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;
/**!
   * is
   * the definitive JavaScript type testing library
   *
   * @copyright 2013-2014 Enrico Marino / Jordan Harband
   * @license MIT
   */
var n,r,i=Object.prototype,e=i.hasOwnProperty,o=i.toString;"function"==typeof Symbol&&(n=Symbol.prototype.valueOf),"function"==typeof BigInt&&(r=BigInt.prototype.valueOf);var s=function(t){return t!=t},a={boolean:1,number:1,string:1,undefined:1},u=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,h=/^[A-Fa-f0-9]+$/,c={};c.a=c.type=function(t,n){return typeof t===n},c.defined=function(t){return void 0!==t},c.empty=function(t){var n,r=o.call(t);if("[object Array]"===r||"[object Arguments]"===r||"[object String]"===r)return 0===t.length;if("[object Object]"===r){for(n in t)if(e.call(t,n))return!1;return!0}return!t},c.equal=function(t,n){if(t===n)return!0;var r,i=o.call(t);if(i!==o.call(n))return!1;if("[object Object]"===i){for(r in t)if(!(c.equal(t[r],n[r])&&r in n))return!1;for(r in n)if(!(c.equal(t[r],n[r])&&r in t))return!1;return!0}if("[object Array]"===i){if((r=t.length)!==n.length)return!1;for(;r--;)if(!c.equal(t[r],n[r]))return!1;return!0}return"[object Function]"===i?t.prototype===n.prototype:"[object Date]"===i&&t.getTime()===n.getTime()},c.hosted=function(t,n){var r=typeof n[t];return"object"===r?!!n[t]:!a[r]},c.instance=c.instanceof=function(t,n){return t instanceof n},c.nil=c.null=function(t){return null===t},c.undef=c.undefined=function(t){return void 0===t},c.args=c.arguments=function(t){var n="[object Arguments]"===o.call(t),r=!c.array(t)&&c.arraylike(t)&&c.object(t)&&c.fn(t.callee);return n||r},c.array=Array.isArray||function(t){return"[object Array]"===o.call(t)},c.args.empty=function(t){return c.args(t)&&0===t.length},c.array.empty=function(t){return c.array(t)&&0===t.length},c.arraylike=function(t){return!!t&&!c.bool(t)&&e.call(t,"length")&&isFinite(t.length)&&c.number(t.length)&&t.length>=0},c.bool=c.boolean=function(t){return"[object Boolean]"===o.call(t)},c.false=function(t){return c.bool(t)&&!1===Boolean(Number(t))},c.true=function(t){return c.bool(t)&&!0===Boolean(Number(t))},c.date=function(t){return"[object Date]"===o.call(t)},c.date.valid=function(t){return c.date(t)&&!isNaN(Number(t))},c.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},c.error=function(t){return"[object Error]"===o.call(t)},c.fn=c.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var n=o.call(t);return"[object Function]"===n||"[object GeneratorFunction]"===n||"[object AsyncFunction]"===n},c.number=function(t){return"[object Number]"===o.call(t)},c.infinite=function(t){return t===1/0||t===-1/0},c.decimal=function(t){return c.number(t)&&!s(t)&&!c.infinite(t)&&t%1!=0},c.divisibleBy=function(t,n){var r=c.infinite(t),i=c.infinite(n),e=c.number(t)&&!s(t)&&c.number(n)&&!s(n)&&0!==n;return r||i||e&&t%n==0},c.integer=c.int=function(t){return c.number(t)&&!s(t)&&t%1==0},c.maximum=function(t,n){if(s(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(n))throw new TypeError("second argument must be array-like");for(var r=n.length;--r>=0;)if(t<n[r])return!1;return!0},c.minimum=function(t,n){if(s(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(n))throw new TypeError("second argument must be array-like");for(var r=n.length;--r>=0;)if(t>n[r])return!1;return!0},c.nan=function(t){return!c.number(t)||t!=t},c.even=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2==0},c.odd=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2!=0},c.ge=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t>=n},c.gt=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t>n},c.le=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t<=n},c.lt=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t<n},c.within=function(t,n,r){if(s(t)||s(n)||s(r))throw new TypeError("NaN is not a valid value");if(!c.number(t)||!c.number(n)||!c.number(r))throw new TypeError("all arguments must be numbers");return c.infinite(t)||c.infinite(n)||c.infinite(r)||t>=n&&t<=r},c.object=function(t){return"[object Object]"===o.call(t)},c.primitive=function(t){return!t||!("object"==typeof t||c.object(t)||c.fn(t)||c.array(t))},c.hash=function(t){return c.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},c.regexp=function(t){return"[object RegExp]"===o.call(t)},c.string=function(t){return"[object String]"===o.call(t)},c.base64=function(t){return c.string(t)&&(!t.length||u.test(t))},c.hex=function(t){return c.string(t)&&(!t.length||h.test(t))},c.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===o.call(t)&&"symbol"==typeof n.call(t)},c.bigint=function(t){return"function"==typeof BigInt&&"[object BigInt]"===o.call(t)&&"bigint"==typeof r.call(t)};var l=c;var f=function(){this.__data__=[],this.size=0};var y=function(t,n){return t===n||t!=t&&n!=n};var d=function(t,n){for(var r=t.length;r--;)if(y(t[r][0],n))return r;return-1},p=Array.prototype.splice;var v=function(t){var n=this.__data__,r=d(n,t);return!(r<0)&&(r==n.length-1?n.pop():p.call(n,r,1),--this.size,!0)};var x=function(t){var n=this.__data__,r=d(n,t);return r<0?void 0:n[r][1]};var m=function(t){return d(this.__data__,t)>-1};var _=function(t,n){var r=this.__data__,i=d(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this};function b(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}b.prototype.clear=f,b.prototype.delete=v,b.prototype.get=x,b.prototype.has=m,b.prototype.set=_;var g=b;var w=function(){this.__data__=new g,this.size=0};var z=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r};var M=function(t){return this.__data__.get(t)};var j=function(t){return this.__data__.has(t)},S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function E(t,n){return t(n={exports:{}},n.exports),n.exports}var C="object"==typeof S&&S&&S.Object===Object&&S,A="object"==typeof self&&self&&self.Object===Object&&self,O=C||A||Function("return this")(),T=O.Symbol,k=Object.prototype,P=k.hasOwnProperty,V=k.toString,q=T?T.toStringTag:void 0;var F=function(t){var n=P.call(t,q),r=t[q];try{t[q]=void 0;var i=!0}catch(t){}var e=V.call(t);return i&&(n?t[q]=r:delete t[q]),e},B=Object.prototype.toString;var N=function(t){return B.call(t)},R="[object Null]",D="[object Undefined]",L=T?T.toStringTag:void 0;var H=function(t){return null==t?void 0===t?D:R:L&&L in Object(t)?F(t):N(t)};var I=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},$="[object AsyncFunction]",X="[object Function]",Y="[object GeneratorFunction]",U="[object Proxy]";var Z,Q=function(t){if(!I(t))return!1;var n=H(t);return n==X||n==Y||n==$||n==U},G=O["__core-js_shared__"],W=(Z=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var J=function(t){return!!W&&W in t},K=Function.prototype.toString;var tt=function(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""},nt=/^\[object .+?Constructor\]$/,rt=Function.prototype,it=Object.prototype,et=rt.toString,ot=it.hasOwnProperty,st=RegExp("^"+et.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var at=function(t){return!(!I(t)||J(t))&&(Q(t)?st:nt).test(tt(t))};var ut=function(t,n){return null==t?void 0:t[n]};var ht=function(t,n){var r=ut(t,n);return at(r)?r:void 0},ct=ht(O,"Map"),lt=ht(Object,"create");var ft=function(){this.__data__=lt?lt(null):{},this.size=0};var yt=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},dt="__lodash_hash_undefined__",pt=Object.prototype.hasOwnProperty;var vt=function(t){var n=this.__data__;if(lt){var r=n[t];return r===dt?void 0:r}return pt.call(n,t)?n[t]:void 0},xt=Object.prototype.hasOwnProperty;var mt=function(t){var n=this.__data__;return lt?void 0!==n[t]:xt.call(n,t)},_t="__lodash_hash_undefined__";var bt=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lt&&void 0===n?_t:n,this};function gt(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}gt.prototype.clear=ft,gt.prototype.delete=yt,gt.prototype.get=vt,gt.prototype.has=mt,gt.prototype.set=bt;var wt=gt;var zt=function(){this.size=0,this.__data__={hash:new wt,map:new(ct||g),string:new wt}};var Mt=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t};var jt=function(t,n){var r=t.__data__;return Mt(n)?r["string"==typeof n?"string":"hash"]:r.map};var St=function(t){var n=jt(this,t).delete(t);return this.size-=n?1:0,n};var Et=function(t){return jt(this,t).get(t)};var Ct=function(t){return jt(this,t).has(t)};var At=function(t,n){var r=jt(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this};function Ot(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}Ot.prototype.clear=zt,Ot.prototype.delete=St,Ot.prototype.get=Et,Ot.prototype.has=Ct,Ot.prototype.set=At;var Tt=Ot,kt=200;var Pt=function(t,n){var r=this.__data__;if(r instanceof g){var i=r.__data__;if(!ct||i.length<kt-1)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new Tt(i)}return r.set(t,n),this.size=r.size,this};function Vt(t){var n=this.__data__=new g(t);this.size=n.size}Vt.prototype.clear=w,Vt.prototype.delete=z,Vt.prototype.get=M,Vt.prototype.has=j,Vt.prototype.set=Pt;var qt=Vt,Ft="__lodash_hash_undefined__";var Bt=function(t){return this.__data__.set(t,Ft),this};var Nt=function(t){return this.__data__.has(t)};function Rt(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new Tt;++n<r;)this.add(t[n])}Rt.prototype.add=Rt.prototype.push=Bt,Rt.prototype.has=Nt;var Dt=Rt;var Lt=function(t,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1};var Ht=function(t,n){return t.has(n)},It=1,$t=2;var Xt=function(t,n,r,i,e,o){var s=r&It,a=t.length,u=n.length;if(a!=u&&!(s&&u>a))return!1;var h=o.get(t);if(h&&o.get(n))return h==n;var c=-1,l=!0,f=r&$t?new Dt:void 0;for(o.set(t,n),o.set(n,t);++c<a;){var y=t[c],d=n[c];if(i)var p=s?i(d,y,c,n,t,o):i(y,d,c,t,n,o);if(void 0!==p){if(p)continue;l=!1;break}if(f){if(!Lt(n,(function(t,n){if(!Ht(f,n)&&(y===t||e(y,t,r,i,o)))return f.push(n)}))){l=!1;break}}else if(y!==d&&!e(y,d,r,i,o)){l=!1;break}}return o.delete(t),o.delete(n),l},Yt=O.Uint8Array;var Ut=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t,i){r[++n]=[i,t]})),r};var Zt=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=t})),r},Qt=1,Gt=2,Wt="[object Boolean]",Jt="[object Date]",Kt="[object Error]",tn="[object Map]",nn="[object Number]",rn="[object RegExp]",en="[object Set]",on="[object String]",sn="[object Symbol]",an="[object ArrayBuffer]",un="[object DataView]",hn=T?T.prototype:void 0,cn=hn?hn.valueOf:void 0;var ln=function(t,n,r,i,e,o,s){switch(r){case un:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case an:return!(t.byteLength!=n.byteLength||!o(new Yt(t),new Yt(n)));case Wt:case Jt:case nn:return y(+t,+n);case Kt:return t.name==n.name&&t.message==n.message;case rn:case on:return t==n+"";case tn:var a=Ut;case en:var u=i&Qt;if(a||(a=Zt),t.size!=n.size&&!u)return!1;var h=s.get(t);if(h)return h==n;i|=Gt,s.set(t,n);var c=Xt(a(t),a(n),i,e,o,s);return s.delete(t),c;case sn:if(cn)return cn.call(t)==cn.call(n)}return!1};var fn=function(t,n){for(var r=-1,i=n.length,e=t.length;++r<i;)t[e+r]=n[r];return t},yn=Array.isArray;var dn=function(t,n,r){var i=n(t);return yn(t)?i:fn(i,r(t))};var pn=function(t,n){for(var r=-1,i=null==t?0:t.length,e=0,o=[];++r<i;){var s=t[r];n(s,r,t)&&(o[e++]=s)}return o};var vn=function(){return[]},xn=Object.prototype.propertyIsEnumerable,mn=Object.getOwnPropertySymbols,_n=mn?function(t){return null==t?[]:(t=Object(t),pn(mn(t),(function(n){return xn.call(t,n)})))}:vn;var bn=function(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i};var gn=function(t){return null!=t&&"object"==typeof t},wn="[object Arguments]";var zn=function(t){return gn(t)&&H(t)==wn},Mn=Object.prototype,jn=Mn.hasOwnProperty,Sn=Mn.propertyIsEnumerable,En=zn(function(){return arguments}())?zn:function(t){return gn(t)&&jn.call(t,"callee")&&!Sn.call(t,"callee")};var Cn=function(){return!1},An=E((function(t,n){var r=n&&!n.nodeType&&n,i=r&&t&&!t.nodeType&&t,e=i&&i.exports===r?O.Buffer:void 0,o=(e?e.isBuffer:void 0)||Cn;t.exports=o})),On=9007199254740991,Tn=/^(?:0|[1-9]\d*)$/;var kn=function(t,n){var r=typeof t;return!!(n=null==n?On:n)&&("number"==r||"symbol"!=r&&Tn.test(t))&&t>-1&&t%1==0&&t<n},Pn=9007199254740991;var Vn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Pn},qn={};qn["[object Float32Array]"]=qn["[object Float64Array]"]=qn["[object Int8Array]"]=qn["[object Int16Array]"]=qn["[object Int32Array]"]=qn["[object Uint8Array]"]=qn["[object Uint8ClampedArray]"]=qn["[object Uint16Array]"]=qn["[object Uint32Array]"]=!0,qn["[object Arguments]"]=qn["[object Array]"]=qn["[object ArrayBuffer]"]=qn["[object Boolean]"]=qn["[object DataView]"]=qn["[object Date]"]=qn["[object Error]"]=qn["[object Function]"]=qn["[object Map]"]=qn["[object Number]"]=qn["[object Object]"]=qn["[object RegExp]"]=qn["[object Set]"]=qn["[object String]"]=qn["[object WeakMap]"]=!1;var Fn=function(t){return gn(t)&&Vn(t.length)&&!!qn[H(t)]};var Bn=function(t){return function(n){return t(n)}},Nn=E((function(t,n){var r=n&&!n.nodeType&&n,i=r&&t&&!t.nodeType&&t,e=i&&i.exports===r&&C.process,o=function(){try{return e&&e.binding&&e.binding("util")}catch(t){}}();t.exports=o})),Rn=Nn&&Nn.isTypedArray,Dn=Rn?Bn(Rn):Fn,Ln=Object.prototype.hasOwnProperty;var Hn=function(t,n){var r=yn(t),i=!r&&En(t),e=!r&&!i&&An(t),o=!r&&!i&&!e&&Dn(t),s=r||i||e||o,a=s?bn(t.length,String):[],u=a.length;for(var h in t)!n&&!Ln.call(t,h)||s&&("length"==h||e&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||kn(h,u))||a.push(h);return a},In=Object.prototype;var $n=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||In)};var Xn=function(t,n){return function(r){return t(n(r))}}(Object.keys,Object),Yn=Object.prototype.hasOwnProperty;var Un=function(t){if(!$n(t))return Xn(t);var n=[];for(var r in Object(t))Yn.call(t,r)&&"constructor"!=r&&n.push(r);return n};var Zn=function(t){return null!=t&&Vn(t.length)&&!Q(t)};var Qn=function(t){return Zn(t)?Hn(t):Un(t)};var Gn=function(t){return dn(t,Qn,_n)},Wn=1,Jn=Object.prototype.hasOwnProperty;var Kn=function(t,n,r,i,e,o){var s=r&Wn,a=Gn(t),u=a.length;if(u!=Gn(n).length&&!s)return!1;for(var h=u;h--;){var c=a[h];if(!(s?c in n:Jn.call(n,c)))return!1}var l=o.get(t);if(l&&o.get(n))return l==n;var f=!0;o.set(t,n),o.set(n,t);for(var y=s;++h<u;){var d=t[c=a[h]],p=n[c];if(i)var v=s?i(p,d,c,n,t,o):i(d,p,c,t,n,o);if(!(void 0===v?d===p||e(d,p,r,i,o):v)){f=!1;break}y||(y="constructor"==c)}if(f&&!y){var x=t.constructor,m=n.constructor;x!=m&&"constructor"in t&&"constructor"in n&&!("function"==typeof x&&x instanceof x&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(n),f},tr=ht(O,"DataView"),nr=ht(O,"Promise"),rr=ht(O,"Set"),ir=ht(O,"WeakMap"),er=tt(tr),or=tt(ct),sr=tt(nr),ar=tt(rr),ur=tt(ir),hr=H;(tr&&"[object DataView]"!=hr(new tr(new ArrayBuffer(1)))||ct&&"[object Map]"!=hr(new ct)||nr&&"[object Promise]"!=hr(nr.resolve())||rr&&"[object Set]"!=hr(new rr)||ir&&"[object WeakMap]"!=hr(new ir))&&(hr=function(t){var n=H(t),r="[object Object]"==n?t.constructor:void 0,i=r?tt(r):"";if(i)switch(i){case er:return"[object DataView]";case or:return"[object Map]";case sr:return"[object Promise]";case ar:return"[object Set]";case ur:return"[object WeakMap]"}return n});var cr=hr,lr=1,fr="[object Arguments]",yr="[object Array]",dr="[object Object]",pr=Object.prototype.hasOwnProperty;var vr=function(t,n,r,i,e,o){var s=yn(t),a=yn(n),u=s?yr:cr(t),h=a?yr:cr(n),c=(u=u==fr?dr:u)==dr,l=(h=h==fr?dr:h)==dr,f=u==h;if(f&&An(t)){if(!An(n))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new qt),s||Dn(t)?Xt(t,n,r,i,e,o):ln(t,n,u,r,i,e,o);if(!(r&lr)){var y=c&&pr.call(t,"__wrapped__"),d=l&&pr.call(n,"__wrapped__");if(y||d){var p=y?t.value():t,v=d?n.value():n;return o||(o=new qt),e(p,v,r,i,o)}}return!!f&&(o||(o=new qt),Kn(t,n,r,i,e,o))};var xr=function t(n,r,i,e,o){return n===r||(null==n||null==r||!gn(n)&&!gn(r)?n!=n&&r!=r:vr(n,r,i,e,t,o))},mr=1,_r=2;var br=function(t,n,r,i){var e=r.length,o=e,s=!i;if(null==t)return!o;for(t=Object(t);e--;){var a=r[e];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++e<o;){var u=(a=r[e])[0],h=t[u],c=a[1];if(s&&a[2]){if(void 0===h&&!(u in t))return!1}else{var l=new qt;if(i)var f=i(h,c,u,t,n,l);if(!(void 0===f?xr(c,h,mr|_r,i,l):f))return!1}}return!0};var gr=function(t){return t==t&&!I(t)};var wr=function(t){for(var n=Qn(t),r=n.length;r--;){var i=n[r],e=t[i];n[r]=[i,e,gr(e)]}return n};var zr=function(t,n){return function(r){return null!=r&&(r[t]===n&&(void 0!==n||t in Object(r)))}};var Mr=function(t){var n=wr(t);return 1==n.length&&n[0][2]?zr(n[0][0],n[0][1]):function(r){return r===t||br(r,t,n)}},jr="[object Symbol]";var Sr=function(t){return"symbol"==typeof t||gn(t)&&H(t)==jr},Er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cr=/^\w*$/;var Ar=function(t,n){if(yn(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Sr(t))||(Cr.test(t)||!Er.test(t)||null!=n&&t in Object(n))},Or="Expected a function";function Tr(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(Or);var r=function(){var i=arguments,e=n?n.apply(this,i):i[0],o=r.cache;if(o.has(e))return o.get(e);var s=t.apply(this,i);return r.cache=o.set(e,s)||o,s};return r.cache=new(Tr.Cache||Tt),r}Tr.Cache=Tt;var kr=Tr,Pr=500;var Vr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qr=/\\(\\)?/g,Fr=function(t){var n=kr(t,(function(t){return r.size===Pr&&r.clear(),t})),r=n.cache;return n}((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Vr,(function(t,r,i,e){n.push(i?e.replace(qr,"$1"):r||t)})),n}));var Br=function(t,n){for(var r=-1,i=null==t?0:t.length,e=Array(i);++r<i;)e[r]=n(t[r],r,t);return e},Nr=1/0,Rr=T?T.prototype:void 0,Dr=Rr?Rr.toString:void 0;var Lr=function t(n){if("string"==typeof n)return n;if(yn(n))return Br(n,t)+"";if(Sr(n))return Dr?Dr.call(n):"";var r=n+"";return"0"==r&&1/n==-Nr?"-0":r};var Hr=function(t){return null==t?"":Lr(t)};var Ir=function(t,n){return yn(t)?t:Ar(t,n)?[t]:Fr(Hr(t))},$r=1/0;var Xr=function(t){if("string"==typeof t||Sr(t))return t;var n=t+"";return"0"==n&&1/t==-$r?"-0":n};var Yr=function(t,n){for(var r=0,i=(n=Ir(n,t)).length;null!=t&&r<i;)t=t[Xr(n[r++])];return r&&r==i?t:void 0};var Ur=function(t,n,r){var i=null==t?void 0:Yr(t,n);return void 0===i?r:i};var Zr=function(t,n){return null!=t&&n in Object(t)};var Qr=function(t,n,r){for(var i=-1,e=(n=Ir(n,t)).length,o=!1;++i<e;){var s=Xr(n[i]);if(!(o=null!=t&&r(t,s)))break;t=t[s]}return o||++i!=e?o:!!(e=null==t?0:t.length)&&Vn(e)&&kn(s,e)&&(yn(t)||En(t))};var Gr=function(t,n){return null!=t&&Qr(t,n,Zr)},Wr=1,Jr=2;var Kr=function(t,n){return Ar(t)&&gr(n)?zr(Xr(t),n):function(r){var i=Ur(r,t);return void 0===i&&i===n?Gr(r,t):xr(n,i,Wr|Jr)}};var ti=function(t){return t};var ni=function(t){return function(n){return null==n?void 0:n[t]}};var ri=function(t){return function(n){return Yr(n,t)}};var ii=function(t){return Ar(t)?ni(Xr(t)):ri(t)};var ei=function(t){return"function"==typeof t?t:null==t?ti:"object"==typeof t?yn(t)?Kr(t[0],t[1]):Mr(t):ii(t)};var oi=function(t,n,r,i){for(var e=t.length,o=r+(i?1:-1);i?o--:++o<e;)if(n(t[o],o,t))return o;return-1};var si=function(t){return t!=t};var ai=function(t,n,r){for(var i=r-1,e=t.length;++i<e;)if(t[i]===n)return i;return-1};var ui=function(t,n,r){return n==n?ai(t,n,r):oi(t,si,r)};var hi=function(t,n){return!!(null==t?0:t.length)&&ui(t,n,0)>-1};var ci=function(t,n,r){for(var i=-1,e=null==t?0:t.length;++i<e;)if(r(n,t[i]))return!0;return!1};var li=function(){},fi=rr&&1/Zt(new rr([,-0]))[1]==1/0?function(t){return new rr(t)}:li,yi=200;var di=function(t,n,r){var i=-1,e=hi,o=t.length,s=!0,a=[],u=a;if(r)s=!1,e=ci;else if(o>=yi){var h=n?null:fi(t);if(h)return Zt(h);s=!1,e=Ht,u=new Dt}else u=n?[]:a;t:for(;++i<o;){var c=t[i],l=n?n(c):c;if(c=r||0!==c?c:0,s&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;n&&u.push(l),a.push(c)}else e(u,l,r)||(u!==a&&u.push(l),a.push(c))}return a};var pi=function(t,n){return t&&t.length?di(t,ei(n)):[]},vi=200;var xi=function(t,n,r,i){var e=-1,o=hi,s=!0,a=t.length,u=[],h=n.length;if(!a)return u;r&&(n=Br(n,Bn(r))),i?(o=ci,s=!1):n.length>=vi&&(o=Ht,s=!1,n=new Dt(n));t:for(;++e<a;){var c=t[e],l=null==r?c:r(c);if(c=i||0!==c?c:0,s&&l==l){for(var f=h;f--;)if(n[f]===l)continue t;u.push(c)}else o(n,l,i)||u.push(c)}return u},mi=T?T.isConcatSpreadable:void 0;var _i=function(t){return yn(t)||En(t)||!!(mi&&t&&t[mi])};var bi=function t(n,r,i,e,o){var s=-1,a=n.length;for(i||(i=_i),o||(o=[]);++s<a;){var u=n[s];r>0&&i(u)?r>1?t(u,r-1,i,e,o):fn(o,u):e||(o[o.length]=u)}return o};var gi=function(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)},wi=Math.max;var zi=function(t,n,r){return n=wi(void 0===n?t.length-1:n,0),function(){for(var i=arguments,e=-1,o=wi(i.length-n,0),s=Array(o);++e<o;)s[e]=i[n+e];e=-1;for(var a=Array(n+1);++e<n;)a[e]=i[e];return a[n]=r(s),gi(t,this,a)}};var Mi=function(t){return function(){return t}},ji=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Si=ji?function(t,n){return ji(t,"toString",{configurable:!0,enumerable:!1,value:Mi(n),writable:!0})}:ti,Ei=800,Ci=16,Ai=Date.now;var Oi=function(t){var n=0,r=0;return function(){var i=Ai(),e=Ci-(i-r);if(r=i,e>0){if(++n>=Ei)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(Si);var Ti=function(t){return gn(t)&&Zn(t)};var ki=function(t){var n=null==t?0:t.length;return n?t[n-1]:void 0},Pi=function(t,n){return Oi(zi(t,n,ti),t+"")}((function(t,n){var r=ki(n);return Ti(r)&&(r=void 0),Ti(t)?xi(t,bi(n,1,Ti,!0),ei(r)):[]}));function Vi(t,n){this.x=t||0,this.y=n||0}Object.defineProperties(Vi.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Vi.prototype,{isVector2:!0,set:function(t,n){return this.x=t,this.y=n,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,n){return void 0!==n?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this},sub:function(t,n){return void 0!==n?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var n=this.x,r=this.y,i=t.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y;return n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this},rotateAround:function(t,n){var r=Math.cos(n),i=Math.sin(n),e=this.x-t.x,o=this.y-t.y;return this.x=e*r-o*i+t.x,this.y=e*i+o*r+t.y,this}});for(var qi=Object.freeze({__proto__:null,Vector2:Vi}),Fi=[],Bi=0;Bi<256;Bi++)Fi[Bi]=(Bi<16?"0":"")+Bi.toString(16);var Ni={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Fi[255&t]+Fi[t>>8&255]+Fi[t>>16&255]+Fi[t>>24&255]+"-"+Fi[255&n]+Fi[n>>8&255]+"-"+Fi[n>>16&15|64]+Fi[n>>24&255]+"-"+Fi[63&r|128]+Fi[r>>8&255]+"-"+Fi[r>>16&255]+Fi[r>>24&255]+Fi[255&i]+Fi[i>>8&255]+Fi[i>>16&255]+Fi[i>>24&255]).toUpperCase()},clamp:function(t,n,r){return Math.max(n,Math.min(r,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,r,i,e){return i+(t-n)*(e-i)/(r-n)},lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*(3-2*t)},smootherstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Ni.DEG2RAD},radToDeg:function(t){return t*Ni.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Ri(t,n,r,i){this._x=t||0,this._y=n||0,this._z=r||0,this._w=void 0!==i?i:1}Object.assign(Ri,{slerp:function(t,n,r,i){return r.copy(t).slerp(n,i)},slerpFlat:function(t,n,r,i,e,o,s){var a=r[i+0],u=r[i+1],h=r[i+2],c=r[i+3],l=e[o+0],f=e[o+1],y=e[o+2],d=e[o+3];if(c!==d||a!==l||u!==f||h!==y){var p=1-s,v=a*l+u*f+h*y+c*d,x=v>=0?1:-1,m=1-v*v;if(m>Number.EPSILON){var _=Math.sqrt(m),b=Math.atan2(_,v*x);p=Math.sin(p*b)/_,s=Math.sin(s*b)/_}var g=s*x;if(a=a*p+l*g,u=u*p+f*g,h=h*p+y*g,c=c*p+d*g,p===1-s){var w=1/Math.sqrt(a*a+u*u+h*h+c*c);a*=w,u*=w,h*=w,c*=w}}t[n]=a,t[n+1]=u,t[n+2]=h,t[n+3]=c}}),Object.defineProperties(Ri.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Ri.prototype,{isQuaternion:!0,set:function(t,n,r,i){return this._x=t,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,n){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,i=t._y,e=t._z,o=t.order,s=Math.cos,a=Math.sin,u=s(r/2),h=s(i/2),c=s(e/2),l=a(r/2),f=a(i/2),y=a(e/2);return"XYZ"===o?(this._x=l*h*c+u*f*y,this._y=u*f*c-l*h*y,this._z=u*h*y+l*f*c,this._w=u*h*c-l*f*y):"YXZ"===o?(this._x=l*h*c+u*f*y,this._y=u*f*c-l*h*y,this._z=u*h*y-l*f*c,this._w=u*h*c+l*f*y):"ZXY"===o?(this._x=l*h*c-u*f*y,this._y=u*f*c+l*h*y,this._z=u*h*y+l*f*c,this._w=u*h*c-l*f*y):"ZYX"===o?(this._x=l*h*c-u*f*y,this._y=u*f*c+l*h*y,this._z=u*h*y-l*f*c,this._w=u*h*c+l*f*y):"YZX"===o?(this._x=l*h*c+u*f*y,this._y=u*f*c+l*h*y,this._z=u*h*y-l*f*c,this._w=u*h*c-l*f*y):"XZY"===o&&(this._x=l*h*c-u*f*y,this._y=u*f*c-l*h*y,this._z=u*h*y+l*f*c,this._w=u*h*c+l*f*y),!1!==n&&this._onChangeCallback(),this},setFromAxisAngle:function(t,n){var r=n/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var n,r=t.elements,i=r[0],e=r[4],o=r[8],s=r[1],a=r[5],u=r[9],h=r[2],c=r[6],l=r[10],f=i+a+l;return f>0?(n=.5/Math.sqrt(f+1),this._w=.25/n,this._x=(c-u)*n,this._y=(o-h)*n,this._z=(s-e)*n):i>a&&i>l?(n=2*Math.sqrt(1+i-a-l),this._w=(c-u)/n,this._x=.25*n,this._y=(e+s)/n,this._z=(o+h)/n):a>l?(n=2*Math.sqrt(1+a-i-l),this._w=(o-h)/n,this._x=(e+s)/n,this._y=.25*n,this._z=(u+c)/n):(n=2*Math.sqrt(1+l-i-a),this._w=(s-e)/n,this._x=(o+h)/n,this._y=(u+c)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,n){var r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Ni.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,n){var r=this.angleTo(t);if(0===r)return this;var i=Math.min(1,n/r);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var r=t._x,i=t._y,e=t._z,o=t._w,s=n._x,a=n._y,u=n._z,h=n._w;return this._x=r*h+o*s+i*u-e*a,this._y=i*h+o*a+e*s-r*u,this._z=e*h+o*u+r*a-i*s,this._w=o*h-r*s-i*a-e*u,this._onChangeCallback(),this},slerp:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var r=this._x,i=this._y,e=this._z,o=this._w,s=o*t._w+r*t._x+i*t._y+e*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=r,this._y=i,this._z=e,this;var a=1-s*s;if(a<=Number.EPSILON){var u=1-n;return this._w=u*o+n*this._w,this._x=u*r+n*this._x,this._y=u*i+n*this._y,this._z=u*e+n*this._z,this.normalize(),this._onChangeCallback(),this}var h=Math.sqrt(a),c=Math.atan2(h,s),l=Math.sin((1-n)*c)/h,f=Math.sin(n*c)/h;return this._w=o*l+this._w*f,this._x=r*l+this._x*f,this._y=i*l+this._y*f,this._z=e*l+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Di=new Hi,Li=new Ri;function Hi(t,n,r){this.x=t||0,this.y=n||0,this.z=r||0}Object.assign(Hi.prototype,{isVector3:!0,set:function(t,n,r){return this.x=t,this.y=n,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Li.setFromEuler(t))},applyAxisAngle:function(t,n){return this.applyQuaternion(Li.setFromAxisAngle(t,n))},applyMatrix3:function(t){var n=this.x,r=this.y,i=this.z,e=t.elements;return this.x=e[0]*n+e[3]*r+e[6]*i,this.y=e[1]*n+e[4]*r+e[7]*i,this.z=e[2]*n+e[5]*r+e[8]*i,this},applyMatrix4:function(t){var n=this.x,r=this.y,i=this.z,e=t.elements,o=1/(e[3]*n+e[7]*r+e[11]*i+e[15]);return this.x=(e[0]*n+e[4]*r+e[8]*i+e[12])*o,this.y=(e[1]*n+e[5]*r+e[9]*i+e[13])*o,this.z=(e[2]*n+e[6]*r+e[10]*i+e[14])*o,this},applyQuaternion:function(t){var n=this.x,r=this.y,i=this.z,e=t.x,o=t.y,s=t.z,a=t.w,u=a*n+o*i-s*r,h=a*r+s*n-e*i,c=a*i+e*r-o*n,l=-e*n-o*r-s*i;return this.x=u*a+l*-e+h*-s-c*-o,this.y=h*a+l*-o+c*-e-u*-s,this.z=c*a+l*-s+u*-o-h*-e,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var n=this.x,r=this.y,i=this.z,e=t.elements;return this.x=e[0]*n+e[4]*r+e[8]*i,this.y=e[1]*n+e[5]*r+e[9]*i,this.z=e[2]*n+e[6]*r+e[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},cross:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)},crossVectors:function(t,n){var r=t.x,i=t.y,e=t.z,o=n.x,s=n.y,a=n.z;return this.x=i*a-e*s,this.y=e*o-r*a,this.z=r*s-i*o,this},projectOnVector:function(t){var n=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return Di.copy(this).projectOnVector(t),this.sub(Di)},reflect:function(t){return this.sub(Di.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());0===n&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var r=this.dot(t)/n;return Math.acos(Ni.clamp(r,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return n*n+r*r+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,n,r){var i=Math.sin(n)*t;return this.x=i*Math.sin(r),this.y=Math.cos(n)*t,this.z=i*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this},setFromMatrixPosition:function(t){var n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=i,this},setFromMatrixColumn:function(t,n){return this.fromArray(t.elements,4*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}});var Ii=new Vi;function $i(t,n){this.min=void 0!==t?t:new Vi(1/0,1/0),this.max=void 0!==n?n:new Vi(-1/0,-1/0)}Object.assign($i.prototype,{set:function(t,n){return this.min.copy(t),this.max.copy(n),this},setFromPoints:function(t){this.makeEmpty();for(var n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this},setFromCenterAndSize:function(t,n){var r=Ii.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Vi),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Vi),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,n){return void 0===n&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new Vi),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,n){return void 0===n&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new Vi),n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Ii.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Xi=Object.freeze({__proto__:null,Box2:$i});const{Vector2:Yi}=qi,{Box2:Ui}=Xi,Zi=(t,n=3)=>l.number(t)?Number(t).toFixed(n):0,Qi=t=>t&&l.object(t)&&l.number(t.x)&&l.number(t.y),Gi=t=>t&&l.object(t)&&l.number(t.x)&&l.number(t.y)&&l.number(t.z),Wi=(t,n,r,i)=>Array.isArray(t)?Wi(...t):new Ui(new Yi(t,n),new Yi(r,i));var Ji={hex2string:t=>`hexes|${Zi(t.scale,5)}-${t.pointy?"P":"F"}|`,isPoint3Like:Gi,isPointLike:Qi,isPoint2Like:Qi,cubeString:t=>{if(!Gi(t))throw console.log("bad cubeString candidate:",t),new Error("bad cubeString candidate");return`cube|${t.x},${t.y},${t.z}|`},fix:Zi,point2string:t=>`xy|${Zi(t.x,3)},${Zi(t.y,3)}|`,box2array:t=>{const{min:n,max:r}=t;return[n.x,n.y,r.x,r.y]},array2box:Wi},Ki=Ji.hex2string,te=Ji.isPoint3Like,ne=Ji.isPoint2Like,re=Ji.cubeString,ie=Ji.box2array,ee=Ji.array2box;const oe=t(0).rad(),se=t(30).rad(),ae=(t(60).rad(),t(90).rad(),t(120).rad()),ue=t(150).rad(),he=(t(180).rad(),t(210).rad(),t(240).rad()),ce=t(270).rad(),le=(t(300).rad(),new Vi(se.cos().value,se.sin().value)),fe=new Vi(ue.cos().value,ue.sin().value),ye=new Vi(ce.cos().value,ce.sin().value),de=new Vi(oe.cos().value,oe.sin().value),pe=new Vi(ae.cos().value,ae.sin().value),ve=new Vi(he.cos().value,he.sin().value);class xe extends Hi{constructor(...t){super(...t),this.round(),this.computeZ(),this.immutable=!0}computeZ(){this._z=t(this.x).plus(this.y).times(-1).value}add(t){const n=this.clone();return n.immutable=!1,n.x+=t.x,n.y+=t.y,n.computeZ(),n.immutable=!0,n}get x(){return this._x}set x(t){this.immutable?console.log("attempt to change an immutable CubeCoord"):this._x=t}get y(){return this._y}set y(t){this.immutable?console.log("attempt to change an immutable CubeCoord"):this._y=t}get z(){return this._z}set z(t){this.immutable?console.log("attempt to change an immutable CubeCoord"):this._z=t}get xyCache(){return this._xyCache||(this._xyCache=new Map),this._xyCache}toXY(t){const{pointy:n,scale:r}=t;let i=de,e=pe,o=ve;return n&&(i=le,e=fe,o=ye),i=i.clone().multiplyScalar(this.x),e=e.clone().multiplyScalar(this.y),o=o.clone().multiplyScalar(this.z),new Vi(0,0).add(i).add(e).add(o).multiplyScalar(r/2)}offset(t,n,r){return this.clone().add(new xe(t,n,r))}clone(){return new xe(this.x,this.y,this.z)}getCorners(t){return t.corners(this)}toString(){return re(this)}isEqualTo(t){return te(t)&&t.x===this.x&&t.y===this.y&&t.z===this.z}get neighbors(){return this._neighbors||(this._neighbors=xe.neighbors.map(t=>this.add(t))),this._neighbors}diff(t){return Array.isArray(t)?t.filter(t=>te(t)&&!this.isEqualTo(t)):(console.log("bad set passed to diff"),[])}}xe.util={isCoordLike:t=>!(!t&&te(t))&&(!(!l.int(t.x)||!l.int(t.y))&&-(t.x+t.y)===t.z),goodCoords:t=>Array.isArray(t)?t.filter(xe.util.isCoordLike):(console.log("bad set passed to goodCoords",t),[]),uniq:t=>pi(xe.util.goodCoords(t),re),toMap:t=>xe.util.goodCoords(t).reduce((t,n)=>(t.set(re(n),n),t),new Map),union:(t,n)=>xe.util.uniq(xe.util.goodCoords(t).concat(xe.util.goodCoords(n))),diff:(t,n)=>Pi(xe.util.goodCoords(t),xe.util.goodCoords(n),re())},xe.vectors=new Map,xe.vectors.set("xFlat",de),xe.vectors.set("yFlat",pe),xe.vectors.set("zFlat",ve),xe.vectors.set("xPointy",le),xe.vectors.set("yPointy",fe),xe.vectors.set("zPointy",ye),xe.neighbors=[new xe(1,-1,0),new xe(1,0,-1),new xe(0,1,-1),new xe(-1,1,0),new xe(-1,0,1),new xe(0,-1,1)];var me=function(t,n){return xr(t,n)};const _e=t(30).rad().cos().value;class be{constructor(t){this.scale=Ur(t,"scale",1),this.pointy=Ur(t,"pointy",!1)}toString(){return Ki(this)}corners(t){const n=t.toXY(this);return xe.neighbors.map(t=>t.toXY({scale:this.scale*(1/(2*_e)),pointy:!this.pointy})).map(t=>t.add(n))}get inverse(){return new be({scale:this.scale,pointy:!this.pointy})}nearestHex(n,r){let i;i=ne(n)?new Vi(n.x,n.y):new Vi(n,r);const e=t(i.length()).max(1).div(this.scale).round().max(1).value,o=[new xe(0,0,0),new xe(e,0,0),new xe(-e,0,0),new xe(0,e,0),new xe(0,-e,0)],s=this.closestToPoint(i,o);let a=s,u=s;do{const t=(a=u).neighbors;u=this.closestToPoint(i,[...t,a])}while(!a.equals(u));return a}closestToPoint(t,n,r){return Array.isArray(n)?n.reduce((n,r)=>null===n?r:this.closestToPoint(t,n,r),null):t.distanceToSquared(n.toXY(this))<t.distanceToSquared(r.toXY(this))?n:r}floodQuery(t,n=!0,...r){const i=Date.now();if(!l.fn(t))throw new Error("floodQuery requires function");let e;e=r.length>=4?ee(...r):ee(-10,-10,10,10);const o=this.floodRect(...ie(e),!0),s=new Map;if(o.forEach(n=>{const r=n.toXY(this);t(r,n,this)&&s.set(n.name,n)}),!s.size)return[];if(!n)return Array.from(s.values());const a=()=>{Array.from(s.values()).forEach(n=>{n.neighbors.forEach(n=>{t(n.toXY(this),n,this)&&s.set(n.toString(),n)})})};let u=Array.from(s.keys()),h=[...u];do{if(Date.now()-i>3e3)break;if(u=h,a(),h=Array.from(s.keys()),l.number(n)&&n>1&&h.length>n)break}while(!me(h,u));return Array.from(s.values())}floodRect(...t){const n=ee(...t),r=t[4],i=n.getCenter(new Vi),e=new Map,o=this.nearestHex(i);e.set(o.toString(),o);let s=Array.from(e.keys()),a=[...s];const u=t=>{Array.from(e.values()).forEach(r=>{r.neighbors.forEach(r=>{(t||n.containsPoint(r.toXY(this)))&&e.set(r.toString(),r)})})};do{s=a,u(!1),a=Array.from(e.keys())}while(!me(a,s));return r&&u(!0),Array.from(e.values())}}return{CubeCoord:xe,Hexes:be}}));
