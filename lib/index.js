!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@wonderlandlabs/n")):"function"==typeof define&&define.amd?define(["@wonderlandlabs/n"],n):(t=t||self).Hexagony=n(t._N)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;
/**!
   * is
   * the definitive JavaScript type testing library
   *
   * @copyright 2013-2014 Enrico Marino / Jordan Harband
   * @license MIT
   */
var n,r,e=Object.prototype,i=e.hasOwnProperty,o=e.toString;"function"==typeof Symbol&&(n=Symbol.prototype.valueOf),"function"==typeof BigInt&&(r=BigInt.prototype.valueOf);var s=function(t){return t!=t},a={boolean:1,number:1,string:1,undefined:1},u=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,h=/^[A-Fa-f0-9]+$/,c={};c.a=c.type=function(t,n){return typeof t===n},c.defined=function(t){return void 0!==t},c.empty=function(t){var n,r=o.call(t);if("[object Array]"===r||"[object Arguments]"===r||"[object String]"===r)return 0===t.length;if("[object Object]"===r){for(n in t)if(i.call(t,n))return!1;return!0}return!t},c.equal=function(t,n){if(t===n)return!0;var r,e=o.call(t);if(e!==o.call(n))return!1;if("[object Object]"===e){for(r in t)if(!(c.equal(t[r],n[r])&&r in n))return!1;for(r in n)if(!(c.equal(t[r],n[r])&&r in t))return!1;return!0}if("[object Array]"===e){if((r=t.length)!==n.length)return!1;for(;r--;)if(!c.equal(t[r],n[r]))return!1;return!0}return"[object Function]"===e?t.prototype===n.prototype:"[object Date]"===e&&t.getTime()===n.getTime()},c.hosted=function(t,n){var r=typeof n[t];return"object"===r?!!n[t]:!a[r]},c.instance=c.instanceof=function(t,n){return t instanceof n},c.nil=c.null=function(t){return null===t},c.undef=c.undefined=function(t){return void 0===t},c.args=c.arguments=function(t){var n="[object Arguments]"===o.call(t),r=!c.array(t)&&c.arraylike(t)&&c.object(t)&&c.fn(t.callee);return n||r},c.array=Array.isArray||function(t){return"[object Array]"===o.call(t)},c.args.empty=function(t){return c.args(t)&&0===t.length},c.array.empty=function(t){return c.array(t)&&0===t.length},c.arraylike=function(t){return!!t&&!c.bool(t)&&i.call(t,"length")&&isFinite(t.length)&&c.number(t.length)&&t.length>=0},c.bool=c.boolean=function(t){return"[object Boolean]"===o.call(t)},c.false=function(t){return c.bool(t)&&!1===Boolean(Number(t))},c.true=function(t){return c.bool(t)&&!0===Boolean(Number(t))},c.date=function(t){return"[object Date]"===o.call(t)},c.date.valid=function(t){return c.date(t)&&!isNaN(Number(t))},c.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},c.error=function(t){return"[object Error]"===o.call(t)},c.fn=c.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var n=o.call(t);return"[object Function]"===n||"[object GeneratorFunction]"===n||"[object AsyncFunction]"===n},c.number=function(t){return"[object Number]"===o.call(t)},c.infinite=function(t){return t===1/0||t===-1/0},c.decimal=function(t){return c.number(t)&&!s(t)&&!c.infinite(t)&&t%1!=0},c.divisibleBy=function(t,n){var r=c.infinite(t),e=c.infinite(n),i=c.number(t)&&!s(t)&&c.number(n)&&!s(n)&&0!==n;return r||e||i&&t%n==0},c.integer=c.int=function(t){return c.number(t)&&!s(t)&&t%1==0},c.maximum=function(t,n){if(s(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(n))throw new TypeError("second argument must be array-like");for(var r=n.length;--r>=0;)if(t<n[r])return!1;return!0},c.minimum=function(t,n){if(s(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(n))throw new TypeError("second argument must be array-like");for(var r=n.length;--r>=0;)if(t>n[r])return!1;return!0},c.nan=function(t){return!c.number(t)||t!=t},c.even=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2==0},c.odd=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2!=0},c.ge=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t>=n},c.gt=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t>n},c.le=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t<=n},c.lt=function(t,n){if(s(t)||s(n))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(n)&&t<n},c.within=function(t,n,r){if(s(t)||s(n)||s(r))throw new TypeError("NaN is not a valid value");if(!c.number(t)||!c.number(n)||!c.number(r))throw new TypeError("all arguments must be numbers");return c.infinite(t)||c.infinite(n)||c.infinite(r)||t>=n&&t<=r},c.object=function(t){return"[object Object]"===o.call(t)},c.primitive=function(t){return!t||!("object"==typeof t||c.object(t)||c.fn(t)||c.array(t))},c.hash=function(t){return c.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},c.regexp=function(t){return"[object RegExp]"===o.call(t)},c.string=function(t){return"[object String]"===o.call(t)},c.base64=function(t){return c.string(t)&&(!t.length||u.test(t))},c.hex=function(t){return c.string(t)&&(!t.length||h.test(t))},c.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===o.call(t)&&"symbol"==typeof n.call(t)},c.bigint=function(t){return"function"==typeof BigInt&&"[object BigInt]"===o.call(t)&&"bigint"==typeof r.call(t)};var l=c;var f=function(){this.__data__=[],this.size=0};var y=function(t,n){return t===n||t!=t&&n!=n};var v=function(t,n){for(var r=t.length;r--;)if(y(t[r][0],n))return r;return-1},d=Array.prototype.splice;var p=function(t){var n=this.__data__,r=v(n,t);return!(r<0)&&(r==n.length-1?n.pop():d.call(n,r,1),--this.size,!0)};var x=function(t){var n=this.__data__,r=v(n,t);return r<0?void 0:n[r][1]};var m=function(t){return v(this.__data__,t)>-1};var _=function(t,n){var r=this.__data__,e=v(r,t);return e<0?(++this.size,r.push([t,n])):r[e][1]=n,this};function b(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}b.prototype.clear=f,b.prototype.delete=p,b.prototype.get=x,b.prototype.has=m,b.prototype.set=_;var g=b;var w=function(){this.__data__=new g,this.size=0};var z=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r};var M=function(t){return this.__data__.get(t)};var j=function(t){return this.__data__.has(t)},S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function E(t,n){return t(n={exports:{}},n.exports),n.exports}var A="object"==typeof S&&S&&S.Object===Object&&S,C="object"==typeof self&&self&&self.Object===Object&&self,O=A||C||Function("return this")(),T=O.Symbol,k=Object.prototype,P=k.hasOwnProperty,V=k.toString,q=T?T.toStringTag:void 0;var F=function(t){var n=P.call(t,q),r=t[q];try{t[q]=void 0;var e=!0}catch(t){}var i=V.call(t);return e&&(n?t[q]=r:delete t[q]),i},N=Object.prototype.toString;var B=function(t){return N.call(t)},R="[object Null]",D="[object Undefined]",L=T?T.toStringTag:void 0;var H=function(t){return null==t?void 0===t?D:R:L&&L in Object(t)?F(t):B(t)};var $=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},I="[object AsyncFunction]",X="[object Function]",Y="[object GeneratorFunction]",U="[object Proxy]";var Z,Q=function(t){if(!$(t))return!1;var n=H(t);return n==X||n==Y||n==I||n==U},G=O["__core-js_shared__"],W=(Z=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var J=function(t){return!!W&&W in t},K=Function.prototype.toString;var tt=function(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""},nt=/^\[object .+?Constructor\]$/,rt=Function.prototype,et=Object.prototype,it=rt.toString,ot=et.hasOwnProperty,st=RegExp("^"+it.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var at=function(t){return!(!$(t)||J(t))&&(Q(t)?st:nt).test(tt(t))};var ut=function(t,n){return null==t?void 0:t[n]};var ht=function(t,n){var r=ut(t,n);return at(r)?r:void 0},ct=ht(O,"Map"),lt=ht(Object,"create");var ft=function(){this.__data__=lt?lt(null):{},this.size=0};var yt=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},vt="__lodash_hash_undefined__",dt=Object.prototype.hasOwnProperty;var pt=function(t){var n=this.__data__;if(lt){var r=n[t];return r===vt?void 0:r}return dt.call(n,t)?n[t]:void 0},xt=Object.prototype.hasOwnProperty;var mt=function(t){var n=this.__data__;return lt?void 0!==n[t]:xt.call(n,t)},_t="__lodash_hash_undefined__";var bt=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lt&&void 0===n?_t:n,this};function gt(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}gt.prototype.clear=ft,gt.prototype.delete=yt,gt.prototype.get=pt,gt.prototype.has=mt,gt.prototype.set=bt;var wt=gt;var zt=function(){this.size=0,this.__data__={hash:new wt,map:new(ct||g),string:new wt}};var Mt=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t};var jt=function(t,n){var r=t.__data__;return Mt(n)?r["string"==typeof n?"string":"hash"]:r.map};var St=function(t){var n=jt(this,t).delete(t);return this.size-=n?1:0,n};var Et=function(t){return jt(this,t).get(t)};var At=function(t){return jt(this,t).has(t)};var Ct=function(t,n){var r=jt(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this};function Ot(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}Ot.prototype.clear=zt,Ot.prototype.delete=St,Ot.prototype.get=Et,Ot.prototype.has=At,Ot.prototype.set=Ct;var Tt=Ot,kt=200;var Pt=function(t,n){var r=this.__data__;if(r instanceof g){var e=r.__data__;if(!ct||e.length<kt-1)return e.push([t,n]),this.size=++r.size,this;r=this.__data__=new Tt(e)}return r.set(t,n),this.size=r.size,this};function Vt(t){var n=this.__data__=new g(t);this.size=n.size}Vt.prototype.clear=w,Vt.prototype.delete=z,Vt.prototype.get=M,Vt.prototype.has=j,Vt.prototype.set=Pt;var qt=Vt,Ft="__lodash_hash_undefined__";var Nt=function(t){return this.__data__.set(t,Ft),this};var Bt=function(t){return this.__data__.has(t)};function Rt(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new Tt;++n<r;)this.add(t[n])}Rt.prototype.add=Rt.prototype.push=Nt,Rt.prototype.has=Bt;var Dt=Rt;var Lt=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e;)if(n(t[r],r,t))return!0;return!1};var Ht=function(t,n){return t.has(n)},$t=1,It=2;var Xt=function(t,n,r,e,i,o){var s=r&$t,a=t.length,u=n.length;if(a!=u&&!(s&&u>a))return!1;var h=o.get(t);if(h&&o.get(n))return h==n;var c=-1,l=!0,f=r&It?new Dt:void 0;for(o.set(t,n),o.set(n,t);++c<a;){var y=t[c],v=n[c];if(e)var d=s?e(v,y,c,n,t,o):e(y,v,c,t,n,o);if(void 0!==d){if(d)continue;l=!1;break}if(f){if(!Lt(n,(function(t,n){if(!Ht(f,n)&&(y===t||i(y,t,r,e,o)))return f.push(n)}))){l=!1;break}}else if(y!==v&&!i(y,v,r,e,o)){l=!1;break}}return o.delete(t),o.delete(n),l},Yt=O.Uint8Array;var Ut=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t,e){r[++n]=[e,t]})),r};var Zt=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=t})),r},Qt=1,Gt=2,Wt="[object Boolean]",Jt="[object Date]",Kt="[object Error]",tn="[object Map]",nn="[object Number]",rn="[object RegExp]",en="[object Set]",on="[object String]",sn="[object Symbol]",an="[object ArrayBuffer]",un="[object DataView]",hn=T?T.prototype:void 0,cn=hn?hn.valueOf:void 0;var ln=function(t,n,r,e,i,o,s){switch(r){case un:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case an:return!(t.byteLength!=n.byteLength||!o(new Yt(t),new Yt(n)));case Wt:case Jt:case nn:return y(+t,+n);case Kt:return t.name==n.name&&t.message==n.message;case rn:case on:return t==n+"";case tn:var a=Ut;case en:var u=e&Qt;if(a||(a=Zt),t.size!=n.size&&!u)return!1;var h=s.get(t);if(h)return h==n;e|=Gt,s.set(t,n);var c=Xt(a(t),a(n),e,i,o,s);return s.delete(t),c;case sn:if(cn)return cn.call(t)==cn.call(n)}return!1};var fn=function(t,n){for(var r=-1,e=n.length,i=t.length;++r<e;)t[i+r]=n[r];return t},yn=Array.isArray;var vn=function(t,n,r){var e=n(t);return yn(t)?e:fn(e,r(t))};var dn=function(t,n){for(var r=-1,e=null==t?0:t.length,i=0,o=[];++r<e;){var s=t[r];n(s,r,t)&&(o[i++]=s)}return o};var pn=function(){return[]},xn=Object.prototype.propertyIsEnumerable,mn=Object.getOwnPropertySymbols,_n=mn?function(t){return null==t?[]:(t=Object(t),dn(mn(t),(function(n){return xn.call(t,n)})))}:pn;var bn=function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e};var gn=function(t){return null!=t&&"object"==typeof t},wn="[object Arguments]";var zn=function(t){return gn(t)&&H(t)==wn},Mn=Object.prototype,jn=Mn.hasOwnProperty,Sn=Mn.propertyIsEnumerable,En=zn(function(){return arguments}())?zn:function(t){return gn(t)&&jn.call(t,"callee")&&!Sn.call(t,"callee")};var An=function(){return!1},Cn=E((function(t,n){var r=n&&!n.nodeType&&n,e=r&&t&&!t.nodeType&&t,i=e&&e.exports===r?O.Buffer:void 0,o=(i?i.isBuffer:void 0)||An;t.exports=o})),On=9007199254740991,Tn=/^(?:0|[1-9]\d*)$/;var kn=function(t,n){var r=typeof t;return!!(n=null==n?On:n)&&("number"==r||"symbol"!=r&&Tn.test(t))&&t>-1&&t%1==0&&t<n},Pn=9007199254740991;var Vn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Pn},qn={};qn["[object Float32Array]"]=qn["[object Float64Array]"]=qn["[object Int8Array]"]=qn["[object Int16Array]"]=qn["[object Int32Array]"]=qn["[object Uint8Array]"]=qn["[object Uint8ClampedArray]"]=qn["[object Uint16Array]"]=qn["[object Uint32Array]"]=!0,qn["[object Arguments]"]=qn["[object Array]"]=qn["[object ArrayBuffer]"]=qn["[object Boolean]"]=qn["[object DataView]"]=qn["[object Date]"]=qn["[object Error]"]=qn["[object Function]"]=qn["[object Map]"]=qn["[object Number]"]=qn["[object Object]"]=qn["[object RegExp]"]=qn["[object Set]"]=qn["[object String]"]=qn["[object WeakMap]"]=!1;var Fn=function(t){return gn(t)&&Vn(t.length)&&!!qn[H(t)]};var Nn=function(t){return function(n){return t(n)}},Bn=E((function(t,n){var r=n&&!n.nodeType&&n,e=r&&t&&!t.nodeType&&t,i=e&&e.exports===r&&A.process,o=function(){try{return i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),Rn=Bn&&Bn.isTypedArray,Dn=Rn?Nn(Rn):Fn,Ln=Object.prototype.hasOwnProperty;var Hn=function(t,n){var r=yn(t),e=!r&&En(t),i=!r&&!e&&Cn(t),o=!r&&!e&&!i&&Dn(t),s=r||e||i||o,a=s?bn(t.length,String):[],u=a.length;for(var h in t)!n&&!Ln.call(t,h)||s&&("length"==h||i&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||kn(h,u))||a.push(h);return a},$n=Object.prototype;var In=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||$n)};var Xn=function(t,n){return function(r){return t(n(r))}}(Object.keys,Object),Yn=Object.prototype.hasOwnProperty;var Un=function(t){if(!In(t))return Xn(t);var n=[];for(var r in Object(t))Yn.call(t,r)&&"constructor"!=r&&n.push(r);return n};var Zn=function(t){return null!=t&&Vn(t.length)&&!Q(t)};var Qn=function(t){return Zn(t)?Hn(t):Un(t)};var Gn=function(t){return vn(t,Qn,_n)},Wn=1,Jn=Object.prototype.hasOwnProperty;var Kn=function(t,n,r,e,i,o){var s=r&Wn,a=Gn(t),u=a.length;if(u!=Gn(n).length&&!s)return!1;for(var h=u;h--;){var c=a[h];if(!(s?c in n:Jn.call(n,c)))return!1}var l=o.get(t);if(l&&o.get(n))return l==n;var f=!0;o.set(t,n),o.set(n,t);for(var y=s;++h<u;){var v=t[c=a[h]],d=n[c];if(e)var p=s?e(d,v,c,n,t,o):e(v,d,c,t,n,o);if(!(void 0===p?v===d||i(v,d,r,e,o):p)){f=!1;break}y||(y="constructor"==c)}if(f&&!y){var x=t.constructor,m=n.constructor;x!=m&&"constructor"in t&&"constructor"in n&&!("function"==typeof x&&x instanceof x&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(n),f},tr=ht(O,"DataView"),nr=ht(O,"Promise"),rr=ht(O,"Set"),er=ht(O,"WeakMap"),ir=tt(tr),or=tt(ct),sr=tt(nr),ar=tt(rr),ur=tt(er),hr=H;(tr&&"[object DataView]"!=hr(new tr(new ArrayBuffer(1)))||ct&&"[object Map]"!=hr(new ct)||nr&&"[object Promise]"!=hr(nr.resolve())||rr&&"[object Set]"!=hr(new rr)||er&&"[object WeakMap]"!=hr(new er))&&(hr=function(t){var n=H(t),r="[object Object]"==n?t.constructor:void 0,e=r?tt(r):"";if(e)switch(e){case ir:return"[object DataView]";case or:return"[object Map]";case sr:return"[object Promise]";case ar:return"[object Set]";case ur:return"[object WeakMap]"}return n});var cr=hr,lr=1,fr="[object Arguments]",yr="[object Array]",vr="[object Object]",dr=Object.prototype.hasOwnProperty;var pr=function(t,n,r,e,i,o){var s=yn(t),a=yn(n),u=s?yr:cr(t),h=a?yr:cr(n),c=(u=u==fr?vr:u)==vr,l=(h=h==fr?vr:h)==vr,f=u==h;if(f&&Cn(t)){if(!Cn(n))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new qt),s||Dn(t)?Xt(t,n,r,e,i,o):ln(t,n,u,r,e,i,o);if(!(r&lr)){var y=c&&dr.call(t,"__wrapped__"),v=l&&dr.call(n,"__wrapped__");if(y||v){var d=y?t.value():t,p=v?n.value():n;return o||(o=new qt),i(d,p,r,e,o)}}return!!f&&(o||(o=new qt),Kn(t,n,r,e,i,o))};var xr=function t(n,r,e,i,o){return n===r||(null==n||null==r||!gn(n)&&!gn(r)?n!=n&&r!=r:pr(n,r,e,i,t,o))},mr=1,_r=2;var br=function(t,n,r,e){var i=r.length,o=i,s=!e;if(null==t)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=r[i])[0],h=t[u],c=a[1];if(s&&a[2]){if(void 0===h&&!(u in t))return!1}else{var l=new qt;if(e)var f=e(h,c,u,t,n,l);if(!(void 0===f?xr(c,h,mr|_r,e,l):f))return!1}}return!0};var gr=function(t){return t==t&&!$(t)};var wr=function(t){for(var n=Qn(t),r=n.length;r--;){var e=n[r],i=t[e];n[r]=[e,i,gr(i)]}return n};var zr=function(t,n){return function(r){return null!=r&&(r[t]===n&&(void 0!==n||t in Object(r)))}};var Mr=function(t){var n=wr(t);return 1==n.length&&n[0][2]?zr(n[0][0],n[0][1]):function(r){return r===t||br(r,t,n)}},jr="[object Symbol]";var Sr=function(t){return"symbol"==typeof t||gn(t)&&H(t)==jr},Er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ar=/^\w*$/;var Cr=function(t,n){if(yn(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Sr(t))||(Ar.test(t)||!Er.test(t)||null!=n&&t in Object(n))},Or="Expected a function";function Tr(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(Or);var r=function(){var e=arguments,i=n?n.apply(this,e):e[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,e);return r.cache=o.set(i,s)||o,s};return r.cache=new(Tr.Cache||Tt),r}Tr.Cache=Tt;var kr=Tr,Pr=500;var Vr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qr=/\\(\\)?/g,Fr=function(t){var n=kr(t,(function(t){return r.size===Pr&&r.clear(),t})),r=n.cache;return n}((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Vr,(function(t,r,e,i){n.push(e?i.replace(qr,"$1"):r||t)})),n}));var Nr=function(t,n){for(var r=-1,e=null==t?0:t.length,i=Array(e);++r<e;)i[r]=n(t[r],r,t);return i},Br=1/0,Rr=T?T.prototype:void 0,Dr=Rr?Rr.toString:void 0;var Lr=function t(n){if("string"==typeof n)return n;if(yn(n))return Nr(n,t)+"";if(Sr(n))return Dr?Dr.call(n):"";var r=n+"";return"0"==r&&1/n==-Br?"-0":r};var Hr=function(t){return null==t?"":Lr(t)};var $r=function(t,n){return yn(t)?t:Cr(t,n)?[t]:Fr(Hr(t))},Ir=1/0;var Xr=function(t){if("string"==typeof t||Sr(t))return t;var n=t+"";return"0"==n&&1/t==-Ir?"-0":n};var Yr=function(t,n){for(var r=0,e=(n=$r(n,t)).length;null!=t&&r<e;)t=t[Xr(n[r++])];return r&&r==e?t:void 0};var Ur=function(t,n,r){var e=null==t?void 0:Yr(t,n);return void 0===e?r:e};var Zr=function(t,n){return null!=t&&n in Object(t)};var Qr=function(t,n,r){for(var e=-1,i=(n=$r(n,t)).length,o=!1;++e<i;){var s=Xr(n[e]);if(!(o=null!=t&&r(t,s)))break;t=t[s]}return o||++e!=i?o:!!(i=null==t?0:t.length)&&Vn(i)&&kn(s,i)&&(yn(t)||En(t))};var Gr=function(t,n){return null!=t&&Qr(t,n,Zr)},Wr=1,Jr=2;var Kr=function(t,n){return Cr(t)&&gr(n)?zr(Xr(t),n):function(r){var e=Ur(r,t);return void 0===e&&e===n?Gr(r,t):xr(n,e,Wr|Jr)}};var te=function(t){return t};var ne=function(t){return function(n){return null==n?void 0:n[t]}};var re=function(t){return function(n){return Yr(n,t)}};var ee=function(t){return Cr(t)?ne(Xr(t)):re(t)};var ie=function(t){return"function"==typeof t?t:null==t?te:"object"==typeof t?yn(t)?Kr(t[0],t[1]):Mr(t):ee(t)};var oe=function(t,n,r,e){for(var i=t.length,o=r+(e?1:-1);e?o--:++o<i;)if(n(t[o],o,t))return o;return-1};var se=function(t){return t!=t};var ae=function(t,n,r){for(var e=r-1,i=t.length;++e<i;)if(t[e]===n)return e;return-1};var ue=function(t,n,r){return n==n?ae(t,n,r):oe(t,se,r)};var he=function(t,n){return!!(null==t?0:t.length)&&ue(t,n,0)>-1};var ce=function(t,n,r){for(var e=-1,i=null==t?0:t.length;++e<i;)if(r(n,t[e]))return!0;return!1};var le=function(){},fe=rr&&1/Zt(new rr([,-0]))[1]==1/0?function(t){return new rr(t)}:le,ye=200;var ve=function(t,n,r){var e=-1,i=he,o=t.length,s=!0,a=[],u=a;if(r)s=!1,i=ce;else if(o>=ye){var h=n?null:fe(t);if(h)return Zt(h);s=!1,i=Ht,u=new Dt}else u=n?[]:a;t:for(;++e<o;){var c=t[e],l=n?n(c):c;if(c=r||0!==c?c:0,s&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;n&&u.push(l),a.push(c)}else i(u,l,r)||(u!==a&&u.push(l),a.push(c))}return a};var de=function(t,n){return t&&t.length?ve(t,ie(n)):[]},pe=200;var xe=function(t,n,r,e){var i=-1,o=he,s=!0,a=t.length,u=[],h=n.length;if(!a)return u;r&&(n=Nr(n,Nn(r))),e?(o=ce,s=!1):n.length>=pe&&(o=Ht,s=!1,n=new Dt(n));t:for(;++i<a;){var c=t[i],l=null==r?c:r(c);if(c=e||0!==c?c:0,s&&l==l){for(var f=h;f--;)if(n[f]===l)continue t;u.push(c)}else o(n,l,e)||u.push(c)}return u},me=T?T.isConcatSpreadable:void 0;var _e=function(t){return yn(t)||En(t)||!!(me&&t&&t[me])};var be=function t(n,r,e,i,o){var s=-1,a=n.length;for(e||(e=_e),o||(o=[]);++s<a;){var u=n[s];r>0&&e(u)?r>1?t(u,r-1,e,i,o):fn(o,u):i||(o[o.length]=u)}return o};var ge=function(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)},we=Math.max;var ze=function(t,n,r){return n=we(void 0===n?t.length-1:n,0),function(){for(var e=arguments,i=-1,o=we(e.length-n,0),s=Array(o);++i<o;)s[i]=e[n+i];i=-1;for(var a=Array(n+1);++i<n;)a[i]=e[i];return a[n]=r(s),ge(t,this,a)}};var Me=function(t){return function(){return t}},je=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Se=je?function(t,n){return je(t,"toString",{configurable:!0,enumerable:!1,value:Me(n),writable:!0})}:te,Ee=800,Ae=16,Ce=Date.now;var Oe=function(t){var n=0,r=0;return function(){var e=Ce(),i=Ae-(e-r);if(r=e,i>0){if(++n>=Ee)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(Se);var Te=function(t){return gn(t)&&Zn(t)};var ke=function(t){var n=null==t?0:t.length;return n?t[n-1]:void 0},Pe=function(t,n){return Oe(ze(t,n,te),t+"")}((function(t,n){var r=ke(n);return Te(r)&&(r=void 0),Te(t)?xe(t,be(n,1,Te,!0),ie(r)):[]}));function Ve(t,n){this.x=t||0,this.y=n||0}Object.defineProperties(Ve.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ve.prototype,{isVector2:!0,set:function(t,n){return this.x=t,this.y=n,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,n){return void 0!==n?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this},sub:function(t,n){return void 0!==n?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var n=this.x,r=this.y,e=t.elements;return this.x=e[0]*n+e[3]*r+e[6],this.y=e[1]*n+e[4]*r+e[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y;return n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this},rotateAround:function(t,n){var r=Math.cos(n),e=Math.sin(n),i=this.x-t.x,o=this.y-t.y;return this.x=i*r-o*e+t.x,this.y=i*e+o*r+t.y,this}});for(var qe=Object.freeze({__proto__:null,Vector2:Ve}),Fe=[],Ne=0;Ne<256;Ne++)Fe[Ne]=(Ne<16?"0":"")+Ne.toString(16);var Be={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(Fe[255&t]+Fe[t>>8&255]+Fe[t>>16&255]+Fe[t>>24&255]+"-"+Fe[255&n]+Fe[n>>8&255]+"-"+Fe[n>>16&15|64]+Fe[n>>24&255]+"-"+Fe[63&r|128]+Fe[r>>8&255]+"-"+Fe[r>>16&255]+Fe[r>>24&255]+Fe[255&e]+Fe[e>>8&255]+Fe[e>>16&255]+Fe[e>>24&255]).toUpperCase()},clamp:function(t,n,r){return Math.max(n,Math.min(r,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,r,e,i){return e+(t-n)*(i-e)/(r-n)},lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*(3-2*t)},smootherstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Be.DEG2RAD},radToDeg:function(t){return t*Be.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Re(t,n,r,e){this._x=t||0,this._y=n||0,this._z=r||0,this._w=void 0!==e?e:1}Object.assign(Re,{slerp:function(t,n,r,e){return r.copy(t).slerp(n,e)},slerpFlat:function(t,n,r,e,i,o,s){var a=r[e+0],u=r[e+1],h=r[e+2],c=r[e+3],l=i[o+0],f=i[o+1],y=i[o+2],v=i[o+3];if(c!==v||a!==l||u!==f||h!==y){var d=1-s,p=a*l+u*f+h*y+c*v,x=p>=0?1:-1,m=1-p*p;if(m>Number.EPSILON){var _=Math.sqrt(m),b=Math.atan2(_,p*x);d=Math.sin(d*b)/_,s=Math.sin(s*b)/_}var g=s*x;if(a=a*d+l*g,u=u*d+f*g,h=h*d+y*g,c=c*d+v*g,d===1-s){var w=1/Math.sqrt(a*a+u*u+h*h+c*c);a*=w,u*=w,h*=w,c*=w}}t[n]=a,t[n+1]=u,t[n+2]=h,t[n+3]=c}}),Object.defineProperties(Re.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Re.prototype,{isQuaternion:!0,set:function(t,n,r,e){return this._x=t,this._y=n,this._z=r,this._w=e,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,n){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,e=t._y,i=t._z,o=t.order,s=Math.cos,a=Math.sin,u=s(r/2),h=s(e/2),c=s(i/2),l=a(r/2),f=a(e/2),y=a(i/2);return"XYZ"===o?(this._x=l*h*c+u*f*y,this._y=u*f*c-l*h*y,this._z=u*h*y+l*f*c,this._w=u*h*c-l*f*y):"YXZ"===o?(this._x=l*h*c+u*f*y,this._y=u*f*c-l*h*y,this._z=u*h*y-l*f*c,this._w=u*h*c+l*f*y):"ZXY"===o?(this._x=l*h*c-u*f*y,this._y=u*f*c+l*h*y,this._z=u*h*y+l*f*c,this._w=u*h*c-l*f*y):"ZYX"===o?(this._x=l*h*c-u*f*y,this._y=u*f*c+l*h*y,this._z=u*h*y-l*f*c,this._w=u*h*c+l*f*y):"YZX"===o?(this._x=l*h*c+u*f*y,this._y=u*f*c+l*h*y,this._z=u*h*y-l*f*c,this._w=u*h*c-l*f*y):"XZY"===o&&(this._x=l*h*c-u*f*y,this._y=u*f*c-l*h*y,this._z=u*h*y+l*f*c,this._w=u*h*c+l*f*y),!1!==n&&this._onChangeCallback(),this},setFromAxisAngle:function(t,n){var r=n/2,e=Math.sin(r);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var n,r=t.elements,e=r[0],i=r[4],o=r[8],s=r[1],a=r[5],u=r[9],h=r[2],c=r[6],l=r[10],f=e+a+l;return f>0?(n=.5/Math.sqrt(f+1),this._w=.25/n,this._x=(c-u)*n,this._y=(o-h)*n,this._z=(s-i)*n):e>a&&e>l?(n=2*Math.sqrt(1+e-a-l),this._w=(c-u)/n,this._x=.25*n,this._y=(i+s)/n,this._z=(o+h)/n):a>l?(n=2*Math.sqrt(1+a-e-l),this._w=(o-h)/n,this._x=(i+s)/n,this._y=.25*n,this._z=(u+c)/n):(n=2*Math.sqrt(1+l-e-a),this._w=(s-i)/n,this._x=(o+h)/n,this._y=(u+c)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,n){var r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Be.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,n){var r=this.angleTo(t);if(0===r)return this;var e=Math.min(1,n/r);return this.slerp(t,e),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var r=t._x,e=t._y,i=t._z,o=t._w,s=n._x,a=n._y,u=n._z,h=n._w;return this._x=r*h+o*s+e*u-i*a,this._y=e*h+o*a+i*s-r*u,this._z=i*h+o*u+r*a-e*s,this._w=o*h-r*s-e*a-i*u,this._onChangeCallback(),this},slerp:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var r=this._x,e=this._y,i=this._z,o=this._w,s=o*t._w+r*t._x+e*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=r,this._y=e,this._z=i,this;var a=1-s*s;if(a<=Number.EPSILON){var u=1-n;return this._w=u*o+n*this._w,this._x=u*r+n*this._x,this._y=u*e+n*this._y,this._z=u*i+n*this._z,this.normalize(),this._onChangeCallback(),this}var h=Math.sqrt(a),c=Math.atan2(h,s),l=Math.sin((1-n)*c)/h,f=Math.sin(n*c)/h;return this._w=o*l+this._w*f,this._x=r*l+this._x*f,this._y=e*l+this._y*f,this._z=i*l+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var De=new He,Le=new Re;function He(t,n,r){this.x=t||0,this.y=n||0,this.z=r||0}Object.assign(He.prototype,{isVector3:!0,set:function(t,n,r){return this.x=t,this.y=n,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Le.setFromEuler(t))},applyAxisAngle:function(t,n){return this.applyQuaternion(Le.setFromAxisAngle(t,n))},applyMatrix3:function(t){var n=this.x,r=this.y,e=this.z,i=t.elements;return this.x=i[0]*n+i[3]*r+i[6]*e,this.y=i[1]*n+i[4]*r+i[7]*e,this.z=i[2]*n+i[5]*r+i[8]*e,this},applyMatrix4:function(t){var n=this.x,r=this.y,e=this.z,i=t.elements,o=1/(i[3]*n+i[7]*r+i[11]*e+i[15]);return this.x=(i[0]*n+i[4]*r+i[8]*e+i[12])*o,this.y=(i[1]*n+i[5]*r+i[9]*e+i[13])*o,this.z=(i[2]*n+i[6]*r+i[10]*e+i[14])*o,this},applyQuaternion:function(t){var n=this.x,r=this.y,e=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*n+o*e-s*r,h=a*r+s*n-i*e,c=a*e+i*r-o*n,l=-i*n-o*r-s*e;return this.x=u*a+l*-i+h*-s-c*-o,this.y=h*a+l*-o+c*-i-u*-s,this.z=c*a+l*-s+u*-o-h*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var n=this.x,r=this.y,e=this.z,i=t.elements;return this.x=i[0]*n+i[4]*r+i[8]*e,this.y=i[1]*n+i[5]*r+i[9]*e,this.z=i[2]*n+i[6]*r+i[10]*e,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},cross:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)},crossVectors:function(t,n){var r=t.x,e=t.y,i=t.z,o=n.x,s=n.y,a=n.z;return this.x=e*a-i*s,this.y=i*o-r*a,this.z=r*s-e*o,this},projectOnVector:function(t){var n=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return De.copy(this).projectOnVector(t),this.sub(De)},reflect:function(t){return this.sub(De.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());0===n&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var r=this.dot(t)/n;return Math.acos(Be.clamp(r,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y,e=this.z-t.z;return n*n+r*r+e*e},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,n,r){var e=Math.sin(n)*t;return this.x=e*Math.sin(r),this.y=Math.cos(n)*t,this.z=e*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this},setFromMatrixPosition:function(t){var n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),e=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=e,this},setFromMatrixColumn:function(t,n){return this.fromArray(t.elements,4*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}});var $e=new Ve;function Ie(t,n){this.min=void 0!==t?t:new Ve(1/0,1/0),this.max=void 0!==n?n:new Ve(-1/0,-1/0)}Object.assign(Ie.prototype,{set:function(t,n){return this.min.copy(t),this.max.copy(n),this},setFromPoints:function(t){this.makeEmpty();for(var n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this},setFromCenterAndSize:function(t,n){var r=$e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ve),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ve),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,n){return void 0===n&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new Ve),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,n){return void 0===n&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new Ve),n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return $e.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Xe=Object.freeze({__proto__:null,Box2:Ie});const{Vector2:Ye}=qe,{Box2:Ue}=Xe,Ze=(t,n=3)=>l.number(t)?Number(t).toFixed(n):0,Qe=t=>t&&l.object(t)&&l.number(t.x)&&l.number(t.y),Ge=t=>t&&l.object(t)&&l.number(t.x)&&l.number(t.y)&&l.number(t.z),We=(t,n,r,e)=>Array.isArray(t)?We(...t):new Ue(new Ye(t,n),new Ye(r,e));var Je={hex2string:t=>`hexes|${Ze(t.scale,5)}-${t.pointy?"P":"F"}|`,isPoint3Like:Ge,isPointLike:Qe,isPoint2Like:Qe,cubeString:t=>{if(!Ge(t))throw console.log("bad cubeString candidate:",t),new Error("bad cubeString candidate");return`cube|${t.x},${t.y},${t.z}|`},fix:Ze,point2string:t=>`xy|${Ze(t.x,3)},${Ze(t.y,3)}|`,box2array:t=>{const{min:n,max:r}=t;return[n.x,n.y,r.x,r.y]},array2box:We},Ke=Je.hex2string,ti=Je.isPoint3Like,ni=Je.isPoint2Like,ri=Je.cubeString,ei=Je.box2array,ii=Je.array2box;const oi=t(0).rad(),si=t(30).rad(),ai=(t(60).rad(),t(90).rad(),t(120).rad()),ui=t(150).rad(),hi=(t(180).rad(),t(210).rad(),t(240).rad()),ci=t(270).rad(),li=(t(300).rad(),new Ve(si.cos().value,si.sin().value)),fi=new Ve(ui.cos().value,ui.sin().value),yi=new Ve(ci.cos().value,ci.sin().value),vi=new Ve(oi.cos().value,oi.sin().value),di=new Ve(ai.cos().value,ai.sin().value),pi=new Ve(hi.cos().value,hi.sin().value);class xi extends He{constructor(...t){super(...t),this.round(),this.computeZ(),this.immutable=!0}computeZ(){this._z=t(this.x).plus(this.y).times(-1).value}add(t){const n=this.clone();return n.immutable=!1,n.x+=t.x,n.y+=t.y,n.computeZ(),n.immutable=!0,n}get x(){return this._x}set x(t){this.immutable?console.log("attempt to change an immutable CubeCoord"):this._x=t}get y(){return this._y}set y(t){this.immutable?console.log("attempt to change an immutable CubeCoord"):this._y=t}get z(){return this._z}set z(t){this.immutable?console.log("attempt to change an immutable CubeCoord"):this._z=t}get xyCache(){return this._xyCache||(this._xyCache=new Map),this._xyCache}toXY(t){const{pointy:n,scale:r}=t;let e=vi,i=di,o=pi;return n&&(e=li,i=fi,o=yi),e=e.clone().multiplyScalar(this.x),i=i.clone().multiplyScalar(this.y),o=o.clone().multiplyScalar(this.z),new Ve(0,0).add(e).add(i).add(o).multiplyScalar(r/2)}offset(t,n,r){return this.clone().add(new xi(t,n,r))}clone(){return new xi(this.x,this.y,this.z)}getCorners(t){return t.corners(this)}toString(){return ri(this)}isEqualTo(t){return ti(t)&&t.x===this.x&&t.y===this.y&&t.z===this.z}get neighbors(){return this._neighbors||(this._neighbors=xi.neighbors.map(t=>this.add(t))),this._neighbors}diff(t){return Array.isArray(t)?t.filter(t=>ti(t)&&!this.isEqualTo(t)):(console.log("bad set passed to diff"),[])}}xi.util={isCoordLike:t=>!(!t&&ti(t))&&(!(!l.int(t.x)||!l.int(t.y))&&-(t.x+t.y)===t.z),goodCoords:t=>Array.isArray(t)?t.filter(xi.util.isCoordLike):(console.log("bad set passed to goodCoords",t),[]),uniq:t=>de(xi.util.goodCoords(t),ri),toMap:t=>xi.util.goodCoords(t).reduce((t,n)=>(t.set(ri(n),n),t),new Map),union:(t,n)=>xi.util.uniq(xi.util.goodCoords(t).concat(xi.util.goodCoords(n))),diff:(t,n)=>Pe(xi.util.goodCoords(t),xi.util.goodCoords(n),ri())},xi.vectors=new Map,xi.vectors.set("xFlat",vi),xi.vectors.set("yFlat",di),xi.vectors.set("zFlat",pi),xi.vectors.set("xPointy",li),xi.vectors.set("yPointy",fi),xi.vectors.set("zPointy",yi),xi.neighbors=[new xi(1,-1,0),new xi(1,0,-1),new xi(0,1,-1),new xi(-1,1,0),new xi(-1,0,1),new xi(0,-1,1)];var mi=function(t,n){return xr(t,n)};var _i=function(t,n){for(var r,e=-1,i=t.length;++e<i;){var o=n(t[e]);void 0!==o&&(r=void 0===r?o:r+o)}return r},bi=NaN;var gi=function(t,n){var r=null==t?0:t.length;return r?_i(t,n)/r:bi};var wi=function(t){return gi(t,te)},zi=Math.ceil,Mi=Math.max;var ji=function(t,n,r,e){for(var i=-1,o=Mi(zi((n-t)/(r||1)),0),s=Array(o);o--;)s[e?o:++i]=t,t+=r;return s};var Si=function(t,n,r){if(!$(r))return!1;var e=typeof n;return!!("number"==e?Zn(r)&&kn(n,r.length):"string"==e&&n in r)&&y(r[n],t)},Ei=NaN,Ai=/^\s+|\s+$/g,Ci=/^[-+]0x[0-9a-f]+$/i,Oi=/^0b[01]+$/i,Ti=/^0o[0-7]+$/i,ki=parseInt;var Pi=function(t){if("number"==typeof t)return t;if(Sr(t))return Ei;if($(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=$(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ai,"");var r=Oi.test(t);return r||Ti.test(t)?ki(t.slice(2),r?2:8):Ci.test(t)?Ei:+t},Vi=1/0,qi=17976931348623157e292;var Fi=function(t){return t?(t=Pi(t))===Vi||t===-Vi?(t<0?-1:1)*qi:t==t?t:0:0===t?t:0};var Ni=function(t){return function(n,r,e){return e&&"number"!=typeof e&&Si(n,r,e)&&(r=e=void 0),n=Fi(n),void 0===r?(r=n,n=0):r=Fi(r),e=void 0===e?n<r?1:-1:Fi(e),ji(n,r,e,t)}}(),Bi=(t,n,r,e,i,o)=>{const s=o.nearestHex(wi([t,r]),wi([n,e])),a=2*Math.max(r-t,e-n)/o.scale,u=new Map;return Ni(s.x-a,s.x+a).forEach(i=>Ni(s.y-a,s.y+a).forEach(s=>{const a=new xi(i,s);(function({x:i,y:o}){return i>=t&&i<=r&&o>=n&&o<=e})(a.toXY(o))&&u.set(a.toString(),a)})),i&&Array.from(u.values()).forEach(t=>t.neighbors.forEach(t=>u.set(t.toString(),t))),Array.from(u.values())};const Ri=t(30).rad().cos().value;class Di{constructor(t){this.scale=Ur(t,"scale",1),this.pointy=Ur(t,"pointy",!1)}toString(){return Ke(this)}corners(t){const n=t.toXY(this);return xi.neighbors.map(t=>t.toXY({scale:this.scale*(1/(2*Ri)),pointy:!this.pointy})).map(t=>t.add(n))}get inverse(){return new Di({scale:this.scale,pointy:!this.pointy})}nearestHex(n,r){let e;e=ni(n)?new Ve(n.x,n.y):new Ve(n,r);const i=t(e.length()).max(1).div(this.scale).round().max(1).value,o=[new xi(0,0,0),new xi(i,0,0),new xi(-i,0,0),new xi(0,i,0),new xi(0,-i,0)],s=this.closestToPoint(e,o);let a=s,u=s;do{const t=(a=u).neighbors;u=this.closestToPoint(e,[...t,a])}while(!a.equals(u));return a}closestToPoint(t,n,r){return Array.isArray(n)?n.reduce((n,r)=>null===n?r:this.closestToPoint(t,n,r),null):t.distanceToSquared(n.toXY(this))<t.distanceToSquared(r.toXY(this))?n:r}floodQuery(t,n=!0,...r){const e=Date.now();if(!l.fn(t))throw new Error("floodQuery requires function");let i;i=r.length>=4?ii(...r):ii(-10,-10,10,10);const o=this.floodRect(...ei(i),!0),s=new Map;if(o.forEach(n=>{const r=n.toXY(this);t(r,n,this)&&s.set(n.name,n)}),!s.size)return[];if(!n)return Array.from(s.values());const a=()=>{Array.from(s.values()).forEach(n=>{n.neighbors.forEach(n=>{t(n.toXY(this),n,this)&&s.set(n.toString(),n)})})};let u=Array.from(s.keys()),h=[...u];do{if(Date.now()-e>3e3)break;if(u=h,a(),h=Array.from(s.keys()),l.number(n)&&n>1&&h.length>n)break}while(!mi(h,u));return Array.from(s.values())}floodRect(t,n,r,e,i=!0){return Bi(t,n,r,e,i,this)}floodRectOld(...t){const n=ii(...t),r=t[4],e=n.getCenter(new Ve),i=new Map,o=this.nearestHex(e);i.set(o.toString(),o);let s=Array.from(i.keys()),a=[...s];const u=t=>{Array.from(i.values()).forEach(r=>{r.neighbors.forEach(r=>{(t||n.containsPoint(r.toXY(this)))&&i.set(r.toString(),r)})})};do{s=a,u(!1),a=Array.from(i.keys())}while(!mi(a,s));return r&&u(!0),Array.from(i.values())}}return{CubeCoord:xi,Hexes:Di}}));
